# Анализы: сближение (Proximity) и отход (Offset)

## Допущения и алгоритмы

- Сближение рассчитывается по обработанным точкам `WellResult`:
  - минимальная 3D-дистанция перебором всех пар точек;
  - профиль сближения по TVD строится на пересечении диапазонов TVD базовой и целевой скважины с шагом по умолчанию 50 м (`calculateProximityProfile`).
- Отход (Offset) агрегируется через `calculateDeviationStatistics` по фактическим данным проектных точек (`ProjectPoint.factual`):
  - средний и максимальный отход, глубина максимума, количество точек в допуске.
- Расчёты используют только кроссплатформенные типы (`std::filesystem::path`, единицы — метры и градусы), без POSIX-специфики.

## Экспорт отчётов

Функция `writeAnalysisReport()` сохраняет результаты в каталог:

```
analysis/
├── analysis_report.md   # Сводка на русском (сближение, отход, профиль)
└── analysis_profile.csv # Табличный профиль сближения (TVD; расстояния; MD)
```

CSV разделяется `;`, числовые значения имеют фиксированную точность 2 знака для детерминизма.

## Использование

- CLI демо: `./incline3d --report-analyses --out ./out/analyses` (встроенные данные).
- UI: меню «Диагностика и анализы → Анализы…», выбор базовой и целевой скважин, автоматический экспорт отчёта.

## Тесты

- `tests/unit/test_analysis_reports.cpp` — контроль минимальной дистанции и экспорта CSV/Markdown.
- `tests/integration/test_diagnostics_cli.cpp` — побочный контроль артефактов CLI.
